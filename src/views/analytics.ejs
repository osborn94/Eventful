<div class="container-fluid py-4">

  <div class="mb-4">
    <h2 class="fw-bold">Analytics Overview</h2>
    <p class="text-muted">Performance insights across all your events</p>
  </div>

  <!-- Lifetime Stats -->
  <div class="row g-4 mb-5">

    <div class="col-md-3">
      <div class="card shadow-sm border-0 p-4 h-100">
        <h6 class="text-muted">Total Tickets Sold</h6>
        <h2 class="fw-bold"><%= totalTickets %></h2>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm border-0 p-4 h-100">
        <h6 class="text-muted">Unique Attendees</h6>
        <h2 class="fw-bold"><%= uniqueAttendees %></h2>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm border-0 p-4 h-100">
        <h6 class="text-muted">Scanned Tickets</h6>
        <h2 class="fw-bold text-success"><%= totalScanned %></h2>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm border-0 p-4 h-100">
        <h6 class="text-muted">Revenue</h6>
        <h2 class="fw-bold">â‚¦<%= totalRevenue.toLocaleString() %></h2>
      </div>
    </div>

  </div>

  <!-- Per Event Breakdown -->
  <div class="card border-0 shadow-sm p-4">

    <h5 class="fw-bold mb-4">Event Breakdown</h5>

    <div class="table-responsive analytics-table">
      <table class="table align-middle">

        <thead>
          <tr>
            <th>Event</th>
            <th>Total Tickets</th>
            <th>Unique Buyers</th>
            <th>Scanned</th>
            <th>Unscanned</th>
            <th>Scan Rate</th>
          </tr>
        </thead>

        <tbody>

          <% eventBreakdown.forEach(item => { %>
            <tr>
              <td class="fw-semibold">
                <%= item.event.title %>
              </td>

              <td><%= item.totalTickets %></td>

              <td><%= item.uniqueBuyers %></td>

              <td class="text-success fw-semibold">
                <%= item.scanned %>
              </td>

              <td class="text-danger fw-semibold">
                <%= item.unscanned %>
              </td>

              <td>
                <span class="badge bg-light text-dark">
                  <%= item.totalTickets === 0
                      ? "0%"
                      : Math.round((item.scanned / item.totalTickets) * 100) + "%" %>
                </span>
              </td>
            </tr>
          <% }) %>

        </tbody>

      </table>
    </div>

  </div>

</div>
